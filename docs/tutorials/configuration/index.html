<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 7.4.1+521de1e32e5e1028825729e00e85cc56e078c02a"><meta name=description content='Configuration Myriad uses a configuration file called myriad.toml which uses the toml format. Myriad looks in the current directory fro this file but it can be configured by placing MyriadConfigFile in your project file like this:
<?xml version="1.0" encoding="utf-8"?> <Project Sdk="Microsoft.NET.Sdk"> <PropertyGroup> <TargetFramework>net9.0</TargetFramework> <OutputType>Exe</OutputType> <MyriadConfigFile>myConfig.toml</MyriadConfigFile> </PropertyGroup> ... The configuration section for the built in plugins is very simple, the configuration name or key is passed in by either the plugins generator attribute, in the case of the fields plugin:'><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Configuration And Plugins :: Myriad"><meta name=twitter:description content='Configuration Myriad uses a configuration file called myriad.toml which uses the toml format. Myriad looks in the current directory fro this file but it can be configured by placing MyriadConfigFile in your project file like this:
<?xml version="1.0" encoding="utf-8"?> <Project Sdk="Microsoft.NET.Sdk"> <PropertyGroup> <TargetFramework>net9.0</TargetFramework> <OutputType>Exe</OutputType> <MyriadConfigFile>myConfig.toml</MyriadConfigFile> </PropertyGroup> ... The configuration section for the built in plugins is very simple, the configuration name or key is passed in by either the plugins generator attribute, in the case of the fields plugin:'><meta property="og:url" content="https://moiraesoftware.github.io/myriad/docs/tutorials/configuration/index.html"><meta property="og:site_name" content="Myriad"><meta property="og:title" content="Configuration And Plugins :: Myriad"><meta property="og:description" content='Configuration Myriad uses a configuration file called myriad.toml which uses the toml format. Myriad looks in the current directory fro this file but it can be configured by placing MyriadConfigFile in your project file like this:
<?xml version="1.0" encoding="utf-8"?> <Project Sdk="Microsoft.NET.Sdk"> <PropertyGroup> <TargetFramework>net9.0</TargetFramework> <OutputType>Exe</OutputType> <MyriadConfigFile>myConfig.toml</MyriadConfigFile> </PropertyGroup> ... The configuration section for the built in plugins is very simple, the configuration name or key is passed in by either the plugins generator attribute, in the case of the fields plugin:'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Docs"><meta itemprop=name content="Configuration And Plugins :: Myriad"><meta itemprop=description content='Configuration Myriad uses a configuration file called myriad.toml which uses the toml format. Myriad looks in the current directory fro this file but it can be configured by placing MyriadConfigFile in your project file like this:
<?xml version="1.0" encoding="utf-8"?> <Project Sdk="Microsoft.NET.Sdk"> <PropertyGroup> <TargetFramework>net9.0</TargetFramework> <OutputType>Exe</OutputType> <MyriadConfigFile>myConfig.toml</MyriadConfigFile> </PropertyGroup> ... The configuration section for the built in plugins is very simple, the configuration name or key is passed in by either the plugins generator attribute, in the case of the fields plugin:'><meta itemprop=wordCount content="399"><title>Configuration And Plugins :: Myriad</title>
<link href=/myriad/fonts/fontawesome/css/fontawesome-all.min.css?1741120290 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/myriad/fonts/fontawesome/css/fontawesome-all.min.css?1741120290 rel=stylesheet></noscript><link href=/myriad/css/perfect-scrollbar/perfect-scrollbar.min.css?1741120290 rel=stylesheet><link href=/myriad/css/theme.min.css?1741120290 rel=stylesheet><link href=/myriad/css/format-html.min.css?1741120290 rel=stylesheet id=R-format-style><link href=/myriad/css/auto-complete/auto-complete.min.css?1741120290 rel=stylesheet><script src=/myriad/js/auto-complete/auto-complete.min.js?1741120290 defer></script><script src=/myriad/js/lunr/lunr.min.js?1741120290 defer></script><script src=/myriad/js/lunr/lunr.stemmer.support.min.js?1741120290 defer></script><script src=/myriad/js/lunr/lunr.multi.min.js?1741120290 defer></script><script src=/myriad/js/lunr/lunr.en.min.js?1741120290 defer></script><script src=/myriad/js/search.min.js?1741120290 defer></script><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://moiraesoftware.github.io/myriad",window.relearn.contentLangs=["en"],window.relearn.index_js_url="/myriad/searchindex.en.js?1741120290",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!1,window.relearn.enableBlockCodeWrap=!0,window.relearn.themevariants=["auto"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}}))},window.relearn.markVariant=function(){var t=window.localStorage.getItem(window.relearn.absBaseUri+"/variant"),e=document.querySelector("#R-select-variant");e&&(e.value=t)},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script></head><body class="mobile-support html" data-url=/myriad/docs/tutorials/configuration/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/myriad/index.html><span itemprop=name>About Myriad</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/myriad/docs/index.html><span itemprop=name>Docs</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/myriad/docs/tutorials/index.html><span itemprop=name>Tutorials</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Configuration And Plugins</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/myriad/docs/tutorials/index.html title="Tutorials (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/myriad/docs/tutorials/debugging/index.html title="Debugging (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable docs" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=configuration-and-plugins>Configuration And Plugins</h1><h1 id=configuration>Configuration</h1><p>Myriad uses a configuration file called <code>myriad.toml</code> which uses the <a href=https://toml.io/en/ rel=external target=_blank>toml format</a>. Myriad looks in the current directory fro this file but it can be configured by placing <code>MyriadConfigFile</code> in your project file like this:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code class=language-msbuild data-lang=msbuild>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;Project Sdk=&#34;Microsoft.NET.Sdk&#34;&gt;
  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;net9.0&lt;/TargetFramework&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;MyriadConfigFile&gt;myConfig.toml&lt;/MyriadConfigFile&gt;
  &lt;/PropertyGroup&gt;
...</code></pre></div><p>The configuration section for the built in plugins is very simple, the configuration name or key is passed in by either the plugins generator attribute, in the case of the fields plugin:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>[&lt;Generator.Fields &#34;fields&#34;&gt;]
type Test1 = { one: int; two: string; three: float; four: float32 }</code></pre></div><p>The configuration key is &ldquo;fields&rdquo;, if we now look at the <code>myriad.toml</code> file it looks like this:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[<span style=color:#a6e22e>fields</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>namespace</span> = <span style=color:#e6db74>&#34;TestFields&#34;</span></span></span></code></pre></div><p>You can see that there is a <code>namespace</code> key that is set to &ldquo;TestFields&rdquo;. Using an attribute like this you can configure your plugin to take further information on how to generate the code.</p><p>There is another mechanism of specifying what configuration a plugin will use and that is by using an MSBuild property <code>MyriadConfigKey</code> as follows:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;Compile</span> <span style=color:#a6e22e>Include=</span><span style=color:#e6db74>&#34;ArbitaryFile.fs&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;MyriadFile&gt;</span>Test.txt<span style=color:#f92672>&lt;/MyriadFile&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;MyriadConfigKey&gt;</span>example1<span style=color:#f92672>&lt;/MyriadConfigKey&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/Compile&gt;</span></span></span></code></pre></div><p>The configuration key <code>example1</code> would be passed to the plugin so that it could be consumed. This is used in the <code>Myriad.Plugin.Example1</code> plugin and use uses configuration to specify the <code>namespace</code> used.</p><h1 id=writing-plugins-to-consume-configuration>Writing plugins to consume configuration</h1><p>The plugin interface receives this key via: <code>GeneratorContext</code> . <code>ConfigKey</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>GeneratorContext</span> <span style=color:#f92672>=</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    ConfigKey<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> option
</span></span><span style=display:flex><span>    ConfigGetter<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>string</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>obj</span><span style=color:#f92672>)</span> seq
</span></span><span style=display:flex><span>    InputFilename<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>IMyriadGenerator</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>member</span> ValidInputExtensions<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> seq
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>member</span> Generate<span style=color:#f92672>:</span> GeneratorContext <span style=color:#f92672>-&gt;</span> FsAst.AstRcd.SynModuleOrNamespaceRcd <span style=color:#66d9ef>list</span></span></span></code></pre></div><p>ValidInputExtensions is used so a plugin is tied to certain file types as input, if you plugin generating ast fragments from java files then you would add <code>.java</code> to the <code>ValidInputExtensions</code> implementation for example.</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=display:flex><span>    <span style=color:#66d9ef>interface</span> IMyriadGenerator <span style=color:#66d9ef>with</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>member</span> __.<span style=color:#a6e22e>ValidInputExtensions</span> <span style=color:#f92672>=</span> seq <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;.java&#34;</span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>//...</span></span></span></code></pre></div><p>While we are discussing the <code>IMyriadGenerator</code> interface lets discuss the <code>Generate</code> member:</p><p>Generate takes a <code>GeneratorContext</code> which contains the <code>ConfigKey</code> as mentioned above, the <code>ConfigGetter</code> : <code>string -> (string * obj) seq</code> which is a mean to allow access to the <code>myriad.toml</code> file, you give the function the configuration ket you wish to receive and it returns the configuration. Finally a <code>InputFilename</code> is also passed in so you can load or parse your input files ready to generate an AST. If you look at the included plugins you can see the mechanism for extracting and building AST fragments for reference.</p><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><h1>Myriad</h1></div><search><form action=/myriad/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class="default-animation homelinks"><ul><li><a class=padding href=/myriad/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-shortcutmenu-home class=R-sidebarmenu><ul class="enlarge morespace collapsible-menu"><li class=parent data-nav-id=/myriad/docs/index.html><a class=padding href=/myriad/docs/index.html><i class='fas fa-book'></i>Docs</a><ul id=R-subsections-b5fa667da3c6d162416dac7e8c63bf8a class=collapsible-menu><li class="parent alwaysopen" data-nav-id=/myriad/docs/tutorials/index.html><a class=padding href=/myriad/docs/tutorials/index.html><b>1. </b>Tutorials</a><ul id=R-subsections-07180028894b25824d0806e8fa591d66 class=collapsible-menu><li class=active data-nav-id=/myriad/docs/tutorials/configuration/index.html><a class=padding href=/myriad/docs/tutorials/configuration/index.html><i class='fas fa-cog'></i> Configuration And Plugins</a></li><li data-nav-id=/myriad/docs/tutorials/debugging/index.html><a class=padding href=/myriad/docs/tutorials/debugging/index.html><i class='fas fa-bug'></i> Debugging</a></li><li data-nav-id=/myriad/docs/tutorials/external-plugins/index.html><a class=padding href=/myriad/docs/tutorials/external-plugins/index.html><i class='fas fa-external-link-alt'></i> External Plugins</a></li><li data-nav-id=/myriad/docs/tutorials/msbuild-usage/index.html><a class=padding href=/myriad/docs/tutorials/msbuild-usage/index.html><i class='fab fa-microsoft'></i> MSBuild usage</a></li></ul></li><li class=alwaysopen data-nav-id=/myriad/docs/plugins/index.html><a class=padding href=/myriad/docs/plugins/index.html><b>2. </b>Plugins</a><ul id=R-subsections-dea9de507a10787df952a970ec9e8d7e class=collapsible-menu></ul></li><li data-nav-id=/myriad/docs/external-resources/index.html><a class=padding href=/myriad/docs/external-resources/index.html><i class='fas fa-cog'></i> External resources</a></li></ul></li><li data-nav-id=/myriad/blog/index.html><a class=padding href=/myriad/blog/index.html>News</a></li></ul></div><div id=R-shortcutmenu-shortcuts class=R-sidebarmenu><div class="nav-title padding">More</div><ul class="space collapsible-menu"><li data-nav-id=/myriad/tags><a class=padding href=/myriad/tags><i class='fas fa-tags'></i> Tags</a></li><li data-nav-id=https://github.com/MoiraeSoftware/myriad><a class=padding href=https://github.com/MoiraeSoftware/myriad rel=external target=_blank><i class='fab fa-github'></i> GitHub</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Language</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-en value=#R-select-language-en data-url=/myriad/docs/tutorials/configuration/index.html lang=en-us selected></option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class=footerVariantSwitch><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant onchange=window.relearn.changeVariant(this.value)><option id=R-select-variant-auto value=auto selected>Auto</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></div></aside><script src=/myriad/js/clipboard/clipboard.min.js?1741120290 defer></script><script src=/myriad/js/perfect-scrollbar/perfect-scrollbar.min.js?1741120290 defer></script><script src=/myriad/js/theme.min.js?1741120290 defer></script></body></html>